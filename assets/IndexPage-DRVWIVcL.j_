import{Q as G}from"./QPage-DAomX7La.js";import{Q as H}from"./QSpinnerDots-B_-BC47s.js";import{Q as Y}from"./QBanner-Bh0a8mRE.js";import{H as w,z as X,a6 as C,am as j,aA as W,Y as Z,J as K,aq as _,a8 as b,a7 as M,aa as A,ak as g,ab as s,a9 as m,ad as d,ae as ee,af as te,aB as oe,aC as x,Q as ne,aD as ae,ap as o,aE as re,an as S,Z as le,aF as ie,ax as se}from"./index-Bhl6SETv.js";import{c as f,R as ue,A as pe,a as ce,T as de,p as y,b as me}from"./ResponsiveTheme-Ck20dRLL.js";import{u as fe,M as ge,g as ve,a as he}from"./useGeoJson-DGaBucA4.js";import{u as we}from"./useMapContainerSize-BlGOuocN.js";import{L as ye}from"./Legend-B80d664G.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{Q as be}from"./QTooltip-D8T5Kzqq.js";import{Q as ke,C as _e}from"./ClosePopup-ByZL18Fk.js";import{Q as B}from"./QCardSection-CIRpBG4M.js";import{Q as T}from"./QChip-B3IePdsh.js";import{Q as xe}from"./QCard-4hNWPW3w.js";import{Q as Ce}from"./QDialog-DwvcyMya.js";import"./use-dark-CCCGl-by.js";import"./position-engine-CD8Qv4MV.js";import"./use-tick-0DdASRGW.js";import"./use-model-toggle-DypRWqPB.js";function Ie(){const l=w([]);function a(n){l.value.push(n)}function r(n){return{...n,features:n.features.map(i=>t(i))}}function t(n){const i=l.value.reduce((p,v)=>(p[v.key]=v.getValue(n.id),p),{});return{...n,properties:{...n.properties,...i}}}return{addEnricher:a,enrichGeoJson:r}}const Qe=()=>{const l=w([]),a=w(!1),r=w(null),t=X(()=>l.value.reduce((i,p)=>(i[p.id]=p,i),{}));return{ratings:l,ratingsByRegion:t,loading:a,error:r,fetchRatings:async()=>{a.value=!0,r.value=null;try{const i=await fetch("data/rrii_data.json");if(!i.ok)throw new Error("Failed to fetch ratings data");const p=await i.json();l.value=p.map(v=>({...v}))}catch(i){return r.value=i instanceof Error?i:new Error("Unknown error"),console.error(i),[]}finally{a.value=!1}}}},Ae={key:1,class:"error-message absolute-center"},Se=C({__name:"MapRussia",setup(l){const a=j(),r=w(null),t=w(),n=W(),{fetchGeoJson:i,loading:p}=fe({defaultQuality:"Q0",cacheResults:!0}),v=Ie(),{ratings:V,ratingsByRegion:I,loading:Q,fetchRatings:P}=Qe(),{containerStyles:D}=we({aspectRatio:16/9,maxHeight:"80vh",minHeight:"40vh"}),k={colors:{I:f(4554963),II:f(39389),III:f(3394815),IV:f(11135222),E:f(14540253)},legend:[{name:"Лидеры",group:"I"},{name:"Относительно высокий уровень",group:"II"},{name:"Средний уровень",group:"III"},{name:"Относительно слабый уровень",group:"IV"},{name:"Без оценки",group:"E"}]},L=async()=>{try{const[e,,]=await Promise.all([i(),P()]);if(!e)throw new Error("Не удалось загрузить гео-данные карты");if(!I.value)throw new Error("Не удалось загрузить данные рейтингов");return v.addEnricher({key:"rating",getValue:u=>I.value[u]}),v.enrichGeoJson(e)}catch(e){throw console.error("Ошибка инициализации данных карты:",e),e}};function z(e){e.setThemes([pe.new(e),ce.new(e)]),e.numberFormatter.setAll({numberFormat:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:4},intlLocales:"ru-RU"}),e.timezone=de.new("Europe/Moscow"),e.tapToActivate=!0,e.tapToActivateTimeout=2e3}function O(e){return e.container.children.push(ge.new(e,{projection:ve(),rotationX:-100,rotationY:-20,panX:"none",panY:"none",wheelX:"none",wheelY:"none",homeZoomLevel:1,paddingTop:30,paddingBottom:60,paddingLeft:10,paddingRight:10,height:y(95)}))}function $(e,u,c){return u.series.push(he.new(e,{geoJSON:c}))}function q(e){e.mapPolygons.template.setAll({fillOpacity:.8,stroke:f(3355443),strokeWidth:.5,templateField:"polygonSettings",interactive:!0,tooltipPosition:"pointer"}),e.mapPolygons.template.states.create("hover",{fillOpacity:1});const u=me.new(n.value,{getFillFromSprite:!1,autoTextColor:!1,keepTargetHover:!1,paddingRight:15,paddingLeft:15,paddingTop:10,paddingBottom:10});u.label.setAll({fill:f(2577549)}),u.get("background")?.setAll({fill:f(15658734),fillOpacity:.9,stroke:f(2577549),strokeOpacity:.9}),e.set("tooltip",u),e.mapPolygons.template.setAll({tooltipHTML:`
      <div class="text-center text-subtitle1 text-bold">{name}</div>
        <span class="block">Ранг по РРИИ: <span class="text-bold">{rating.place_by_rrii}</span>
        (предыдущий: <span class="text-bold">{rating.place_by_rrii_prev}</span>)</span>
    `}),e.mapPolygons.template.events.on("click",c=>{const h=(c.target.dataItem?.dataContext).id;h&&a.push({name:"region",params:{id:h}})}),e.data.setAll(J())}function J(){return V.value.map(e=>({id:e.id,polygonSettings:{fill:k.colors[e?.group_by_rrii??"E"]}}))}function N(e,u){const c=u.children.push(ye.new(e,{nameField:"name",fillField:"color",strokeField:"color",x:y(50),centerX:y(50),y:y(100),centerY:y(0)}));U(c),c.data.setAll(k.legend.map(h=>({name:h.name,color:k.colors[h.group]})))}function U(e){e.markers.template.setAll({width:10,height:10}),e.labels.template.setAll({fontSize:"0.8rem",fontWeight:"300"}),e.itemContainers.template.setAll({paddingTop:0,paddingBottom:5})}return Z(async()=>{if(t.value)try{n.value=ue.new(t.value);const{value:e}=n;if(!e)return;e._logo?.dispose(),z(e);const u=await L(),c=O(e),h=$(e,c,u);q(h),N(e,c),await c.appear(1e3,100)}catch(e){r.value=e instanceof Error?e.message:"Неизвестная ошибка"}}),K(()=>{n.value?.dispose()}),(e,u)=>(b(),_("div",{ref_key:"rootDiv",ref:t,class:oe([{loading:g(p)||g(Q),error:r.value},"map-container"]),style:te(g(D))},[g(p)||g(Q)?(b(),M(H,{key:0,class:"absolute-center",color:"primary",size:"xl"})):A("",!0),r.value?(b(),_("div",Ae,[s(Y,{class:"text-white bg-red","inline-actions":""},{default:m(()=>[d(ee(r.value),1)]),_:1})])):A("",!0)],6))}}),Be=R(Se,[["__scopeId","data-v-d668fa69"]]);function Te(l){const a=Object.assign({noopener:!0},l),r=[];for(const t in a){const n=a[t];n===!0?r.push(t):(ae(n)||typeof n=="string"&&n!=="")&&r.push(t+"="+n)}return r.join(",")}function E(l,a,r){let t=window.open;if(x.is.cordova===!0){if(cordova?.InAppBrowser?.open!==void 0)t=cordova.InAppBrowser.open;else if(navigator?.app!==void 0)return navigator.app.loadUrl(l,{openExternal:!0})}const n=t(l,"_blank",Te(r));if(n)return x.is.desktop&&n.focus(),n;a?.()}const F=(l,a,r)=>{if(x.is.ios===!0&&window.SafariViewController!==void 0){window.SafariViewController.isAvailable(t=>{t?window.SafariViewController.show({url:l},ne,a):E(l,a,r)});return}return E(l,a,r)},Ee={class:"absolute gt-xs",style:{top:"1.5rem",right:"1.5rem"}},Fe={class:"q-pb-md"},Me=C({__name:"AboutButton",setup(l){const a=w(!1);return(r,t)=>(b(),_(se,null,[o("div",Ee,[s(S,{icon:g(re),color:"accent",dense:"",flat:"",round:"",size:"md",onClick:t[0]||(t[0]=n=>a.value=!a.value)},{default:m(()=>[s(be,null,{default:m(()=>t[5]||(t[5]=[d("Критерии составления рейтинга")])),_:1})]),_:1},8,["icon"])]),s(Ce,{modelValue:a.value,"onUpdate:modelValue":t[4]||(t[4]=n=>a.value=n)},{default:m(()=>[s(xe,{class:"bg-grey-2 q-px-sm",style:{"min-height":"400px","min-width":"50vw"}},{default:m(()=>[s(B,{class:"row items-center q-pb-none"},{default:m(()=>[t[6]||(t[6]=o("div",{class:"text-subtitle1 text-primary"}," Критерии составления рейтинга ",-1)),s(ke),le(s(S,{icon:g(ie),class:"float-right",dense:"",flat:"",round:"",onClick:t[1]||(t[1]=n=>a.value=!1)},null,8,["icon"]),[[_e]])]),_:1}),s(B,null,{default:m(()=>[t[10]||(t[10]=o("div",{class:"q-pb-md"}," В основу оценки инновационного потенциала регионов положены Выпуски 8 и 9 Рейтинга инновационного развития субъектов Российской Федерации, формируемого Институтом статистических исследований и экономики знаний НИУ ВШЭ в рамках деятельности Российской кластерной обсерватории. ",-1)),t[11]||(t[11]=o("div",{class:"q-pb-sm"}," Данный рейтинг основан на следующих критериях: ",-1)),t[12]||(t[12]=o("div",null,[o("ol",null,[o("li",null,[d(" СОЦИАЛЬНО-ЭКОНОМИЧЕСКИЕ УСЛОВИЯ ИННОВАЦИОННОЙ ДЕЯТЕЛЬНОСТИ "),o("ol",null,[o("li",null,"Основные макроэкономические показатели"),o("li",null,"Образовательный потенциал населения"),o("li",null,"Потенциал цифровизации")])]),o("li",null,[d(" НАУЧНО-ТЕХНИЧЕСКИЙ ПОТЕНЦИАЛ "),o("ol",null,[o("li",null,"Финансирование научных исследований и разработок"),o("li",null,"Кадры науки"),o("li",null,"Материально-техническая база науки"),o("li",null,"Результативность научных исследований и разработок")])]),o("li",null,[d(" ИННОВАЦИОННАЯ ДЕЯТЕЛЬНОСТЬ "),o("ol",null,[o("li",null," Активность в сфере технологических и нетехнологических инноваций "),o("li",null,"Затраты на инновации"),o("li",null,"Результативность инновационной деятельности")])]),o("li",null,[d(" ЭКСПОРТНАЯ АКТИВНОСТЬ "),o("ol",null,[o("li",null,"Экспорт товаров и услуг"),o("li",null,"Экспорт знаний")])]),o("li",null,[d(" КАЧЕСТВО ИННОВАЦИОННОЙ ПОЛИТИКИ "),o("ol",null,[o("li",null," Нормативная правовая база научно-технической и инновационной политики "),o("li",null," Организационное обеспечение научно-технической и инновационной политики "),o("li",null," Участие в федеральной научно-технической и инновационной политике ")])])])],-1)),o("div",Fe,[t[9]||(t[9]=d(" Полные электронные версии выпусков Рейтинга: ")),s(T,{clickable:"",color:"primary",outline:"",onClick:t[2]||(t[2]=n=>g(F)("https://issek.hse.ru/mirror/pubs/share/949132853.pdf"))},{default:m(()=>t[7]||(t[7]=[d(" Выпуск 9 (2024 г.) ")])),_:1}),s(T,{clickable:"",color:"info",outline:"",onClick:t[3]||(t[3]=n=>g(F)("https://issek.hse.ru/mirror/pubs/share/879447941.pdf"))},{default:m(()=>t[8]||(t[8]=[d(" Выпуск 8 (2023 г.) ")])),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}}),Re=R(Me,[["__scopeId","data-v-af74cd7c"]]),Ve={class:"row"},tt=C({__name:"IndexPage",setup(l){return(a,r)=>(b(),M(G,{padding:""},{default:m(()=>[o("div",Ve,[r[0]||(r[0]=o("div",{class:"col-12"},[o("div",{class:"header-glow text-primary text-h3 text-weight-light q-pr-xl"}," Инновационный потенциал регионов Российской Федерации ")],-1)),s(Be)]),s(Re)]),_:1}))}});export{tt as default};
