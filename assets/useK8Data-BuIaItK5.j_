import{H as s,bE as d}from"./index-Bhl6SETv.js";const v=20,t=new Map;function E(){const r=s(!1),n=s(null),o=s([]),u=async()=>{if(o.value.length)return o.value;r.value=!0,n.value=null;try{const e=await fetch("data/k8_data.json");if(!e.ok)throw new Error("Не удалось получить данные К8");const a=await e.json();return o.value=a,a}catch(e){return n.value=e instanceof Error?e.message:"Неизвестная ошибка",console.error("Не удалось получить данные К8:",e),[]}finally{r.value=!1}},i=async e=>{if(t.has(e))return t.get(e);if(t.size>=v){const a=t.keys().next().value;a&&t.delete(a)}r.value=!0,n.value=null;try{const a=await fetch("data/k8_data.json");if(!a.ok)throw new Error("Не удалось получить данные региона");const l=(await a.json()).filter(h=>h.region===e);if(!l)throw new Error("Данные региона не найдены");const c=d.chain(l).sortBy("name").value();return t.set(e,c),c}catch(a){return n.value=a instanceof Error?a.message:"Неизвестная ошибка",console.error("Failed to fetch region data:",a),[]}finally{r.value=!1}};function f(){t.clear()}return{loading:r,error:n,k8:o,fetchK8Data:u,fetchK8RegionData:i,clearCache:f}}export{E as u};
