import{u as En,j as ut,v as He,w as ii,x as oi,m as ri,y as si,z as Qe,B as pe,E as qe,F as Cn,f as ai,H as li,I as Xt,J as ui,K as hi,d as ci,N as fi,O as Ue,k as Ve,h as gi,i as It,g as Ke,P as pi,G as Mn,Q as di,o as vi}from"./ResponsiveTheme-Ck20dRLL.js";import{s as mi,w as yi,H as de}from"./index-Bhl6SETv.js";class zt extends En{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geometries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geoJSONparsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_excluded",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_notIncluded",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.fields.push("geometry","geometryType"),this._setRawDefault("geometryField","geometry"),this._setRawDefault("geometryTypeField","geometryType"),this._setRawDefault("idField","id"),this.on("geoJSON",t=>{let n=this._prevSettings.geoJSON;n&&n!=t&&this.data.clear()}),super._afterNew()}_handleDirties(){const t=this.get("geoJSON");let n=this._prevSettings.geoJSON;n&&n!=t&&(this._prevSettings.geoJSON=void 0,this._geoJSONparsed=!1),this._geoJSONparsed||(this._parseGeoJSON(),this._geoJSONparsed=!0)}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty&&this._handleDirties(),this.get("geoJSON")&&(this.isDirty("geoJSON")||this.isDirty("include")||this.isDirty("exclude"))){this._handleDirties();const t=this.chart,n=this.get("exclude");n&&(t&&(t._centerLocation=null),ut(n,o=>{const r=this.getDataItemById(o);r&&this._excludeDataItem(r)}),ut(this._excluded,o=>{const r=o.get("id");r&&n.indexOf(r)==-1&&this._unexcludeDataItem(o)})),(!n||n.length==0)&&(ut(this._excluded,o=>{this._unexcludeDataItem(o)}),this._excluded=[]);const i=this.get("include");i&&(t&&(t._centerLocation=null),ut(this.dataItems,o=>{const r=o.get("id");r&&i.indexOf(r)==-1?this._notIncludeDataItem(o):this._unNotIncludeDataItem(o)})),i||(ut(this._notIncluded,o=>{this._unNotIncludeDataItem(o)}),this._notIncluded=[])}}_excludeDataItem(t){this._removeGeometry(t.get("geometry")),He(this._excluded,t)}_unexcludeDataItem(t){this._addGeometry(t.get("geometry"),this)}_notIncludeDataItem(t){this._removeGeometry(t.get("geometry")),He(this._notIncluded,t)}_unNotIncludeDataItem(t){this._addGeometry(t.get("geometry"),this)}checkInclude(t,n,i){if(n){if(n.length==0)return!1;if(n.indexOf(t)==-1)return!1}return!(i&&i.length>0&&i.indexOf(t)!=-1)}_parseGeoJSON(){const t=this.get("geoJSON");if(t){let n;t.type=="FeatureCollection"?n=t.features:t.type=="Feature"?n=[t]:["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)!=-1?n=[{geometry:t}]:console.log("nothing found in geoJSON");const i=this.get("geodataNames");if(n){const r=this.get("idField","id");for(let s=0,a=n.length;s<a;s++){let h=n[s],f=h.geometry;if(f){let l=f.type,u=h[r];if(i&&i[u]&&(h.properties.name=i[u]),this._types.indexOf(l)!=-1){let c;u!=null&&(c=ii(this.dataItems,p=>p.get("id")==u));let g;c&&(g=c.dataContext),c?g.geometry||(g.geometry=f,g.geometryType=l,c.set("geometry",f),c.set("geometryType",l),this.processDataItem(c)):(g={geometry:f,geometryType:l,madeFromGeoData:!0},g[r]=u,this.data.push(g)),oi(h.properties,g)}}}}const o="geodataprocessed";this.events.isEnabled(o)&&this.events.dispatch(o,{type:o,target:this})}}_placeBulletsContainer(t){this.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){}projection(){const t=this.chart;if(t)return t.get("projection")}geoPath(){const t=this.chart;if(t)return t.getPrivate("geoPath")}_addGeometry(t,n){if(t&&n.get("affectsBounds",!0)){this._geometries.push(t);const i=this.chart;i&&i.markDirtyGeometries()}}_removeGeometry(t){if(t){ri(this._geometries,t);const n=this.chart;n&&n.markDirtyGeometries()}}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}_onDataClear(){super._onDataClear(),this._geoJSONparsed=!1,this._markDirtyKey("exclude")}}Object.defineProperty(zt,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapSeries"});Object.defineProperty(zt,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:En.classNames.concat([zt.className])});class W{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let o=0;o<this._n&&o<32;o++){const r=n[o],s=t+r,a=Math.abs(t)<Math.abs(r)?t-(s-r):r-(s-t);a&&(n[i++]=a),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,o,r,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,o=t[--n],s=i+o,r=o-(s-i),!r););n>0&&(r<0&&t[n-1]<0||r>0&&t[n-1]>0)&&(o=r*2,i=s+o,o==i-s&&(s=i))}return s}}function*_i(e){for(const t of e)yield*t}function Ln(e){return Array.from(_i(e))}var j=1e-6,tn=1e-12,L=Math.PI,U=L/2,Ht=L/4,H=L*2,B=180/L,E=L/180,$=Math.abs,On=Math.atan,pt=Math.atan2,O=Math.cos,Pi=Math.exp,Pe=Math.hypot,wi=Math.log,N=Math.sin,Si=Math.sign||function(e){return e>0?1:e<0?-1:0},dt=Math.sqrt,bi=Math.tan;function xi(e){return e>1?0:e<-1?L:Math.acos(e)}function yt(e){return e>1?U:e<-1?-U:Math.asin(e)}function k(){}function Qt(e,t){e&&nn.hasOwnProperty(e.type)&&nn[e.type](e,t)}var en={Feature:function(e,t){Qt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,o=n.length;++i<o;)Qt(n[i].geometry,t)}},nn={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){we(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)we(n[i],t,0)},Polygon:function(e,t){on(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,o=n.length;++i<o;)on(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,o=n.length;++i<o;)Qt(n[i],t)}};function we(e,t,n){var i=-1,o=e.length-n,r;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function on(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)we(e[n],t,1);t.polygonEnd()}function ht(e,t){e&&en.hasOwnProperty(e.type)?en[e.type](e,t):Qt(e,t)}var qt=new W,Ut=new W,Nn,Rn,Se,be,xe,rt={point:k,lineStart:k,lineEnd:k,polygonStart:function(){qt=new W,rt.lineStart=Di,rt.lineEnd=Ei},polygonEnd:function(){var e=+qt;Ut.add(e<0?H+e:e),this.lineStart=this.lineEnd=this.point=k},sphere:function(){Ut.add(H)}};function Di(){rt.point=Ci}function Ei(){zn(Nn,Rn)}function Ci(e,t){rt.point=zn,Nn=e,Rn=t,e*=E,t*=E,Se=e,be=O(t=t/2+Ht),xe=N(t)}function zn(e,t){e*=E,t*=E,t=t/2+Ht;var n=e-Se,i=n>=0?1:-1,o=i*n,r=O(t),s=N(t),a=xe*s,h=be*r+a*O(o),f=a*i*N(o);qt.add(pt(f,h)),Se=e,be=r,xe=s}function Mi(e){return Ut=new W,ht(e,rt),Ut*2}function Vt(e){return[pt(e[1],e[0]),yt(e[2])]}function _t(e){var t=e[0],n=e[1],i=O(n);return[i*O(t),i*N(t),N(n)]}function Gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ve(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Kt(e){var t=dt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Y,q,X,K,mt,jn,Tn,bt,Rt,gt,ft,lt={point:De,lineStart:rn,lineEnd:sn,polygonStart:function(){lt.point=Yn,lt.lineStart=Li,lt.lineEnd=Oi,Rt=new W,rt.polygonStart()},polygonEnd:function(){rt.polygonEnd(),lt.point=De,lt.lineStart=rn,lt.lineEnd=sn,qt<0?(Y=-(X=180),q=-(K=90)):Rt>j?K=90:Rt<-1e-6&&(q=-90),ft[0]=Y,ft[1]=X},sphere:function(){Y=-(X=180),q=-(K=90)}};function De(e,t){gt.push(ft=[Y=e,X=e]),t<q&&(q=t),t>K&&(K=t)}function $n(e,t){var n=_t([e*E,t*E]);if(bt){var i=xt(bt,n),o=[i[1],-i[0],0],r=xt(o,i);Kt(r),r=Vt(r);var s=e-mt,a=s>0?1:-1,h=r[0]*B*a,f,l=$(s)>180;l^(a*mt<h&&h<a*e)?(f=r[1]*B,f>K&&(K=f)):(h=(h+360)%360-180,l^(a*mt<h&&h<a*e)?(f=-r[1]*B,f<q&&(q=f)):(t<q&&(q=t),t>K&&(K=t))),l?e<mt?V(Y,e)>V(Y,X)&&(X=e):V(e,X)>V(Y,X)&&(Y=e):X>=Y?(e<Y&&(Y=e),e>X&&(X=e)):e>mt?V(Y,e)>V(Y,X)&&(X=e):V(e,X)>V(Y,X)&&(Y=e)}else gt.push(ft=[Y=e,X=e]);t<q&&(q=t),t>K&&(K=t),bt=n,mt=e}function rn(){lt.point=$n}function sn(){ft[0]=Y,ft[1]=X,lt.point=De,bt=null}function Yn(e,t){if(bt){var n=e-mt;Rt.add($(n)>180?n+(n>0?360:-360):n)}else jn=e,Tn=t;rt.point(e,t),$n(e,t)}function Li(){rt.lineStart()}function Oi(){Yn(jn,Tn),rt.lineEnd(),$(Rt)>j&&(Y=-(X=180)),ft[0]=Y,ft[1]=X,bt=null}function V(e,t){return(t-=e)<0?t+360:t}function Ni(e,t){return e[0]-t[0]}function an(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ri(e){var t,n,i,o,r,s,a;if(K=X=-(Y=q=1/0),gt=[],ht(e,lt),n=gt.length){for(gt.sort(Ni),t=1,i=gt[0],r=[i];t<n;++t)o=gt[t],an(i,o[0])||an(i,o[1])?(V(i[0],o[1])>V(i[0],i[1])&&(i[1]=o[1]),V(o[0],i[1])>V(i[0],i[1])&&(i[0]=o[0])):r.push(i=o);for(s=-1/0,n=r.length-1,t=0,i=r[n];t<=n;i=o,++t)o=r[t],(a=V(i[1],o[0]))>s&&(s=a,Y=o[0],X=i[1])}return gt=ft=null,Y===1/0||q===1/0?[[NaN,NaN],[NaN,NaN]]:[[Y,q],[X,K]]}var Ct,te,ee,ne,ie,oe,re,se,Ee,Ce,Me,Xn,In,A,F,J,nt={sphere:k,point:ke,lineStart:ln,lineEnd:un,polygonStart:function(){nt.lineStart=Ti,nt.lineEnd=$i},polygonEnd:function(){nt.lineStart=ln,nt.lineEnd=un}};function ke(e,t){e*=E,t*=E;var n=O(t);$t(n*O(e),n*N(e),N(t))}function $t(e,t,n){++Ct,ee+=(e-ee)/Ct,ne+=(t-ne)/Ct,ie+=(n-ie)/Ct}function ln(){nt.point=zi}function zi(e,t){e*=E,t*=E;var n=O(t);A=n*O(e),F=n*N(e),J=N(t),nt.point=ji,$t(A,F,J)}function ji(e,t){e*=E,t*=E;var n=O(t),i=n*O(e),o=n*N(e),r=N(t),s=pt(dt((s=F*r-J*o)*s+(s=J*i-A*r)*s+(s=A*o-F*i)*s),A*i+F*o+J*r);te+=s,oe+=s*(A+(A=i)),re+=s*(F+(F=o)),se+=s*(J+(J=r)),$t(A,F,J)}function un(){nt.point=ke}function Ti(){nt.point=Yi}function $i(){Gn(Xn,In),nt.point=ke}function Yi(e,t){Xn=e,In=t,e*=E,t*=E,nt.point=Gn;var n=O(t);A=n*O(e),F=n*N(e),J=N(t),$t(A,F,J)}function Gn(e,t){e*=E,t*=E;var n=O(t),i=n*O(e),o=n*N(e),r=N(t),s=F*r-J*o,a=J*i-A*r,h=A*o-F*i,f=Pe(s,a,h),l=yt(f),u=f&&-l/f;Ee.add(u*s),Ce.add(u*a),Me.add(u*h),te+=l,oe+=l*(A+(A=i)),re+=l*(F+(F=o)),se+=l*(J+(J=r)),$t(A,F,J)}function Xi(e){Ct=te=ee=ne=ie=oe=re=se=0,Ee=new W,Ce=new W,Me=new W,ht(e,nt);var t=+Ee,n=+Ce,i=+Me,o=Pe(t,n,i);return o<tn&&(t=oe,n=re,i=se,te<j&&(t=ee,n=ne,i=ie),o=Pe(t,n,i),o<tn)?[NaN,NaN]:[pt(n,t)*B,yt(i/o)*B]}function Le(e,t){function n(i,o){return i=e(i,o),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,o){return i=t.invert(i,o),i&&e.invert(i[0],i[1])}),n}function Oe(e,t){return $(e)>L&&(e-=Math.round(e/H)*H),[e,t]}Oe.invert=Oe;function Bn(e,t,n){return(e%=H)?t||n?Le(cn(e),fn(t,n)):cn(e):t||n?fn(t,n):Oe}function hn(e){return function(t,n){return t+=e,$(t)>L&&(t-=Math.round(t/H)*H),[t,n]}}function cn(e){var t=hn(e);return t.invert=hn(-e),t}function fn(e,t){var n=O(e),i=N(e),o=O(t),r=N(t);function s(a,h){var f=O(h),l=O(a)*f,u=N(a)*f,c=N(h),g=c*n+l*i;return[pt(u*o-g*r,l*n-c*i),yt(g*o+u*r)]}return s.invert=function(a,h){var f=O(h),l=O(a)*f,u=N(a)*f,c=N(h),g=c*o-u*r;return[pt(u*o+c*r,l*n+g*i),yt(g*n-l*i)]},s}function Ii(e){e=Bn(e[0]*E,e[1]*E,e.length>2?e[2]*E:0);function t(n){return n=e(n[0]*E,n[1]*E),n[0]*=B,n[1]*=B,n}return t.invert=function(n){return n=e.invert(n[0]*E,n[1]*E),n[0]*=B,n[1]*=B,n},t}function Gi(e,t,n,i,o,r){if(n){var s=O(t),a=N(t),h=i*n;o==null?(o=t+i*H,r=t-h/2):(o=gn(s,o),r=gn(s,r),(i>0?o<r:o>r)&&(o+=i*H));for(var f,l=o;i>0?l>r:l<r;l-=h)f=Vt([s,-a*O(l),-a*N(l)]),e.point(f[0],f[1])}}function gn(e,t){t=_t(t),t[0]-=e,Kt(t);var n=xi(-t[1]);return((-t[2]<0?-n:n)+H-j)%H}function Zn(){var e=[],t;return{point:function(n,i,o){t.push([n,i,o])},lineStart:function(){e.push(t=[])},lineEnd:k,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Jt(e,t){return $(e[0]-t[0])<j&&$(e[1]-t[1])<j}function Zt(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function kn(e,t,n,i,o){var r=[],s=[],a,h;if(e.forEach(function(p){if(!((v=p.length-1)<=0)){var v,m=p[0],P=p[v],_;if(Jt(m,P)){if(!m[2]&&!P[2]){for(o.lineStart(),a=0;a<v;++a)o.point((m=p[a])[0],m[1]);o.lineEnd();return}P[0]+=2*j}r.push(_=new Zt(m,p,null,!0)),s.push(_.o=new Zt(m,null,_,!1)),r.push(_=new Zt(P,p,null,!1)),s.push(_.o=new Zt(P,null,_,!0))}}),!!r.length){for(s.sort(t),pn(r),pn(s),a=0,h=s.length;a<h;++a)s[a].e=n=!n;for(var f=r[0],l,u;;){for(var c=f,g=!0;c.v;)if((c=c.n)===f)return;l=c.z,o.lineStart();do{if(c.v=c.o.v=!0,c.e){if(g)for(a=0,h=l.length;a<h;++a)o.point((u=l[a])[0],u[1]);else i(c.x,c.n.x,1,o);c=c.n}else{if(g)for(l=c.p.z,a=l.length-1;a>=0;--a)o.point((u=l[a])[0],u[1]);else i(c.x,c.p.x,-1,o);c=c.p}c=c.o,l=c.z,g=!g}while(!c.v);o.lineEnd()}}}function pn(e){if(t=e.length){for(var t,n=0,i=e[0],o;++n<t;)i.n=o=e[n],o.p=i,i=o;i.n=o=e[0],o.p=i}}function me(e){return $(e[0])<=L?e[0]:Si(e[0])*(($(e[0])+L)%H-L)}function Bi(e,t){var n=me(t),i=t[1],o=N(i),r=[N(n),-O(n),0],s=0,a=0,h=new W;o===1?i=U+j:o===-1&&(i=-U-j);for(var f=0,l=e.length;f<l;++f)if(c=(u=e[f]).length)for(var u,c,g=u[c-1],p=me(g),v=g[1]/2+Ht,m=N(v),P=O(v),_=0;_<c;++_,p=w,m=x,P=R,g=y){var y=u[_],w=me(y),b=y[1]/2+Ht,x=N(b),R=O(b),D=w-p,M=D>=0?1:-1,z=M*D,S=z>L,Z=m*x;if(h.add(pt(Z*M*N(z),P*R+Z*O(z))),s+=S?D+M*H:D,S^p>=n^w>=n){var I=xt(_t(g),_t(y));Kt(I);var T=xt(r,I);Kt(T);var d=(S^D>=0?-1:1)*yt(T[2]);(i>d||i===d&&(I[0]||I[1]))&&(a+=S^D>=0?1:-1)}}return(s<-1e-6||s<j&&h<-1e-12)^a&1}function An(e,t,n,i){return function(o){var r=t(o),s=Zn(),a=t(s),h=!1,f,l,u,c={point:g,lineStart:v,lineEnd:m,polygonStart:function(){c.point=P,c.lineStart=_,c.lineEnd=y,l=[],f=[]},polygonEnd:function(){c.point=g,c.lineStart=v,c.lineEnd=m,l=Ln(l);var w=Bi(f,i);l.length?(h||(o.polygonStart(),h=!0),kn(l,ki,w,n,o)):w&&(h||(o.polygonStart(),h=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),l=f=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function g(w,b){e(w,b)&&o.point(w,b)}function p(w,b){r.point(w,b)}function v(){c.point=p,r.lineStart()}function m(){c.point=g,r.lineEnd()}function P(w,b){u.push([w,b]),a.point(w,b)}function _(){a.lineStart(),u=[]}function y(){P(u[0][0],u[0][1]),a.lineEnd();var w=a.clean(),b=s.result(),x,R=b.length,D,M,z;if(u.pop(),f.push(u),u=null,!!R){if(w&1){if(M=b[0],(D=M.length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),x=0;x<D;++x)o.point((z=M[x])[0],z[1]);o.lineEnd()}return}R>1&&w&2&&b.push(b.pop().concat(b.shift())),l.push(b.filter(Zi))}}return c}}function Zi(e){return e.length>1}function ki(e,t){return((e=e.x)[0]<0?e[1]-U-j:U-e[1])-((t=t.x)[0]<0?t[1]-U-j:U-t[1])}const dn=An(function(){return!0},Ai,Ji,[-L,-U]);function Ai(e){var t=NaN,n=NaN,i=NaN,o;return{lineStart:function(){e.lineStart(),o=1},point:function(r,s){var a=r>0?L:-L,h=$(r-t);$(h-L)<j?(e.point(t,n=(n+s)/2>0?U:-U),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(r,n),o=0):i!==a&&h>=L&&($(t-i)<j&&(t-=i*j),$(r-a)<j&&(r-=a*j),n=Fi(t,n,r,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(a,n),o=0),e.point(t=r,n=s),i=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-o}}}function Fi(e,t,n,i){var o,r,s=N(e-n);return $(s)>j?On((N(t)*(r=O(i))*N(n)-N(i)*(o=O(t))*N(e))/(o*r*s)):(t+i)/2}function Ji(e,t,n,i){var o;if(e==null)o=n*U,i.point(-L,o),i.point(0,o),i.point(L,o),i.point(L,0),i.point(L,-o),i.point(0,-o),i.point(-L,-o),i.point(-L,0),i.point(-L,o);else if($(e[0]-t[0])>j){var r=e[0]<t[0]?L:-L;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(t[0],t[1])}function Wi(e){var t=O(e),n=6*E,i=t>0,o=$(t)>j;function r(l,u,c,g){Gi(g,e,n,c,l,u)}function s(l,u){return O(l)*O(u)>t}function a(l){var u,c,g,p,v;return{lineStart:function(){p=g=!1,v=1},point:function(m,P){var _=[m,P],y,w=s(m,P),b=i?w?0:f(m,P):w?f(m+(m<0?L:-L),P):0;if(!u&&(p=g=w)&&l.lineStart(),w!==g&&(y=h(u,_),(!y||Jt(u,y)||Jt(_,y))&&(_[2]=1)),w!==g)v=0,w?(l.lineStart(),y=h(_,u),l.point(y[0],y[1])):(y=h(u,_),l.point(y[0],y[1],2),l.lineEnd()),u=y;else if(o&&u&&i^w){var x;!(b&c)&&(x=h(_,u,!0))&&(v=0,i?(l.lineStart(),l.point(x[0][0],x[0][1]),l.point(x[1][0],x[1][1]),l.lineEnd()):(l.point(x[1][0],x[1][1]),l.lineEnd(),l.lineStart(),l.point(x[0][0],x[0][1],3)))}w&&(!u||!Jt(u,_))&&l.point(_[0],_[1]),u=_,g=w,c=b},lineEnd:function(){g&&l.lineEnd(),u=null},clean:function(){return v|(p&&g)<<1}}}function h(l,u,c){var g=_t(l),p=_t(u),v=[1,0,0],m=xt(g,p),P=Gt(m,m),_=m[0],y=P-_*_;if(!y)return!c&&l;var w=t*P/y,b=-t*_/y,x=xt(v,m),R=Bt(v,w),D=Bt(m,b);ve(R,D);var M=x,z=Gt(R,M),S=Gt(M,M),Z=z*z-S*(Gt(R,R)-1);if(!(Z<0)){var I=dt(Z),T=Bt(M,(-z-I)/S);if(ve(T,R),T=Vt(T),!c)return T;var d=l[0],C=u[0],G=l[1],Q=u[1],tt;C<d&&(tt=d,d=C,C=tt);var Et=C-d,st=$(Et-L)<j,vt=st||Et<j;if(!st&&Q<G&&(tt=G,G=Q,Q=tt),vt?st?G+Q>0^T[1]<($(T[0]-d)<j?G:Q):G<=T[1]&&T[1]<=Q:Et>L^(d<=T[0]&&T[0]<=C)){var at=Bt(M,(-z+I)/S);return ve(at,R),[T,Vt(at)]}}}function f(l,u){var c=i?e:L-e,g=0;return l<-c?g|=1:l>c&&(g|=2),u<-c?g|=4:u>c&&(g|=8),g}return An(s,a,r,i?[0,-e]:[-L,e-L])}function Hi(e,t,n,i,o,r){var s=e[0],a=e[1],h=t[0],f=t[1],l=0,u=1,c=h-s,g=f-a,p;if(p=n-s,!(!c&&p>0)){if(p/=c,c<0){if(p<l)return;p<u&&(u=p)}else if(c>0){if(p>u)return;p>l&&(l=p)}if(p=o-s,!(!c&&p<0)){if(p/=c,c<0){if(p>u)return;p>l&&(l=p)}else if(c>0){if(p<l)return;p<u&&(u=p)}if(p=i-a,!(!g&&p>0)){if(p/=g,g<0){if(p<l)return;p<u&&(u=p)}else if(g>0){if(p>u)return;p>l&&(l=p)}if(p=r-a,!(!g&&p<0)){if(p/=g,g<0){if(p>u)return;p>l&&(l=p)}else if(g>0){if(p<l)return;p<u&&(u=p)}return l>0&&(e[0]=s+l*c,e[1]=a+l*g),u<1&&(t[0]=s+u*c,t[1]=a+u*g),!0}}}}}var kt=1e9,At=-1e9;function Qi(e,t,n,i){function o(f,l){return e<=f&&f<=n&&t<=l&&l<=i}function r(f,l,u,c){var g=0,p=0;if(f==null||(g=s(f,u))!==(p=s(l,u))||h(f,l)<0^u>0)do c.point(g===0||g===3?e:n,g>1?i:t);while((g=(g+u+4)%4)!==p);else c.point(l[0],l[1])}function s(f,l){return $(f[0]-e)<j?l>0?0:3:$(f[0]-n)<j?l>0?2:1:$(f[1]-t)<j?l>0?1:0:l>0?3:2}function a(f,l){return h(f.x,l.x)}function h(f,l){var u=s(f,1),c=s(l,1);return u!==c?u-c:u===0?l[1]-f[1]:u===1?f[0]-l[0]:u===2?f[1]-l[1]:l[0]-f[0]}return function(f){var l=f,u=Zn(),c,g,p,v,m,P,_,y,w,b,x,R={point:D,lineStart:Z,lineEnd:I,polygonStart:z,polygonEnd:S};function D(d,C){o(d,C)&&l.point(d,C)}function M(){for(var d=0,C=0,G=g.length;C<G;++C)for(var Q=g[C],tt=1,Et=Q.length,st=Q[0],vt,at,Yt=st[0],wt=st[1];tt<Et;++tt)vt=Yt,at=wt,st=Q[tt],Yt=st[0],wt=st[1],at<=i?wt>i&&(Yt-vt)*(i-at)>(wt-at)*(e-vt)&&++d:wt<=i&&(Yt-vt)*(i-at)<(wt-at)*(e-vt)&&--d;return d}function z(){l=u,c=[],g=[],x=!0}function S(){var d=M(),C=x&&d,G=(c=Ln(c)).length;(C||G)&&(f.polygonStart(),C&&(f.lineStart(),r(null,null,1,f),f.lineEnd()),G&&kn(c,a,d,r,f),f.polygonEnd()),l=f,c=g=p=null}function Z(){R.point=T,g&&g.push(p=[]),b=!0,w=!1,_=y=NaN}function I(){c&&(T(v,m),P&&w&&u.rejoin(),c.push(u.result())),R.point=D,w&&l.lineEnd()}function T(d,C){var G=o(d,C);if(g&&p.push([d,C]),b)v=d,m=C,P=G,b=!1,G&&(l.lineStart(),l.point(d,C));else if(G&&w)l.point(d,C);else{var Q=[_=Math.max(At,Math.min(kt,_)),y=Math.max(At,Math.min(kt,y))],tt=[d=Math.max(At,Math.min(kt,d)),C=Math.max(At,Math.min(kt,C))];Hi(Q,tt,e,t,n,i)?(w||(l.lineStart(),l.point(Q[0],Q[1])),l.point(tt[0],tt[1]),G||l.lineEnd(),x=!1):G&&(l.lineStart(),l.point(d,C),x=!1)}_=d,y=C,w=G}return R}}const Ne=e=>e;var ye=new W,Re=new W,Fn,Jn,ze,je,ct={point:k,lineStart:k,lineEnd:k,polygonStart:function(){ct.lineStart=qi,ct.lineEnd=Vi},polygonEnd:function(){ct.lineStart=ct.lineEnd=ct.point=k,ye.add($(Re)),Re=new W},result:function(){var e=ye/2;return ye=new W,e}};function qi(){ct.point=Ui}function Ui(e,t){ct.point=Wn,Fn=ze=e,Jn=je=t}function Wn(e,t){Re.add(je*e-ze*t),ze=e,je=t}function Vi(){Wn(Fn,Jn)}var Dt=1/0,ae=Dt,jt=-Dt,le=jt,ue={point:Ki,lineStart:k,lineEnd:k,polygonStart:k,polygonEnd:k,result:function(){var e=[[Dt,ae],[jt,le]];return jt=le=-(ae=Dt=1/0),e}};function Ki(e,t){e<Dt&&(Dt=e),e>jt&&(jt=e),t<ae&&(ae=t),t>le&&(le=t)}var Te=0,$e=0,Mt=0,he=0,ce=0,St=0,Ye=0,Xe=0,Lt=0,Hn,Qn,it,ot,et={point:Pt,lineStart:vn,lineEnd:mn,polygonStart:function(){et.lineStart=no,et.lineEnd=io},polygonEnd:function(){et.point=Pt,et.lineStart=vn,et.lineEnd=mn},result:function(){var e=Lt?[Ye/Lt,Xe/Lt]:St?[he/St,ce/St]:Mt?[Te/Mt,$e/Mt]:[NaN,NaN];return Te=$e=Mt=he=ce=St=Ye=Xe=Lt=0,e}};function Pt(e,t){Te+=e,$e+=t,++Mt}function vn(){et.point=to}function to(e,t){et.point=eo,Pt(it=e,ot=t)}function eo(e,t){var n=e-it,i=t-ot,o=dt(n*n+i*i);he+=o*(it+e)/2,ce+=o*(ot+t)/2,St+=o,Pt(it=e,ot=t)}function mn(){et.point=Pt}function no(){et.point=oo}function io(){qn(Hn,Qn)}function oo(e,t){et.point=qn,Pt(Hn=it=e,Qn=ot=t)}function qn(e,t){var n=e-it,i=t-ot,o=dt(n*n+i*i);he+=o*(it+e)/2,ce+=o*(ot+t)/2,St+=o,o=ot*e-it*t,Ye+=o*(it+e),Xe+=o*(ot+t),Lt+=o*3,Pt(it=e,ot=t)}function Un(e){this._context=e}Un.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,H);break}}},result:k};var Ie=new W,_e,Vn,Kn,Ot,Nt,Tt={point:k,lineStart:function(){Tt.point=ro},lineEnd:function(){_e&&ti(Vn,Kn),Tt.point=k},polygonStart:function(){_e=!0},polygonEnd:function(){_e=null},result:function(){var e=+Ie;return Ie=new W,e}};function ro(e,t){Tt.point=ti,Vn=Ot=e,Kn=Nt=t}function ti(e,t){Ot-=e,Nt-=t,Ie.add(dt(Ot*Ot+Nt*Nt)),Ot=e,Nt=t}let yn,fe,_n,Pn;class wn{constructor(t){this._append=t==null?ei:so(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==_n||this._append!==fe){const i=this._radius,o=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,_n=i,fe=this._append,Pn=this._,this._=o}this._+=Pn;break}}}result(){const t=this._;return this._="",t.length?t:null}}function ei(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function so(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return ei;if(t!==yn){const n=10**t;yn=t,fe=function(o){let r=1;this._+=o[0];for(const s=o.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+o[r]}}return fe}function ao(e,t){let n=3,i=4.5,o,r;function s(a){return a&&(typeof i=="function"&&r.pointRadius(+i.apply(this,arguments)),ht(a,o(r))),r.result()}return s.area=function(a){return ht(a,o(ct)),ct.result()},s.measure=function(a){return ht(a,o(Tt)),Tt.result()},s.bounds=function(a){return ht(a,o(ue)),ue.result()},s.centroid=function(a){return ht(a,o(et)),et.result()},s.projection=function(a){return arguments.length?(o=a==null?(e=null,Ne):(e=a).stream,s):e},s.context=function(a){return arguments.length?(r=a==null?(t=null,new wn(n)):new Un(t=a),typeof i!="function"&&r.pointRadius(i),s):t},s.pointRadius=function(a){return arguments.length?(i=typeof a=="function"?a:(r.pointRadius(+a),+a),s):i},s.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const h=Math.floor(a);if(!(h>=0))throw new RangeError(`invalid digits: ${a}`);n=h}return t===null&&(r=new wn(n)),s},s.projection(e).digits(n).context(t)}function Ae(e){return function(t){var n=new Ge;for(var i in e)n[i]=e[i];return n.stream=t,n}}function Ge(){}Ge.prototype={constructor:Ge,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Fe(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),ht(n,e.stream(ue)),t(ue.result()),i!=null&&e.clipExtent(i),e}function ni(e,t,n){return Fe(e,function(i){var o=t[1][0]-t[0][0],r=t[1][1]-t[0][1],s=Math.min(o/(i[1][0]-i[0][0]),r/(i[1][1]-i[0][1])),a=+t[0][0]+(o-s*(i[1][0]+i[0][0]))/2,h=+t[0][1]+(r-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([a,h])},n)}function lo(e,t,n){return ni(e,[[0,0],t],n)}function uo(e,t,n){return Fe(e,function(i){var o=+t,r=o/(i[1][0]-i[0][0]),s=(o-r*(i[1][0]+i[0][0]))/2,a=-r*i[0][1];e.scale(150*r).translate([s,a])},n)}function ho(e,t,n){return Fe(e,function(i){var o=+t,r=o/(i[1][1]-i[0][1]),s=-r*i[0][0],a=(o-r*(i[1][1]+i[0][1]))/2;e.scale(150*r).translate([s,a])},n)}var Sn=16,co=O(30*E);function bn(e,t){return+t?go(e,t):fo(e)}function fo(e){return Ae({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function go(e,t){function n(i,o,r,s,a,h,f,l,u,c,g,p,v,m){var P=f-i,_=l-o,y=P*P+_*_;if(y>4*t&&v--){var w=s+c,b=a+g,x=h+p,R=dt(w*w+b*b+x*x),D=yt(x/=R),M=$($(x)-1)<j||$(r-u)<j?(r+u)/2:pt(b,w),z=e(M,D),S=z[0],Z=z[1],I=S-i,T=Z-o,d=_*I-P*T;(d*d/y>t||$((P*I+_*T)/y-.5)>.3||s*c+a*g+h*p<co)&&(n(i,o,r,s,a,h,S,Z,M,w/=R,b/=R,x,v,m),m.point(S,Z),n(S,Z,M,w,b,x,f,l,u,c,g,p,v,m))}}return function(i){var o,r,s,a,h,f,l,u,c,g,p,v,m={point:P,lineStart:_,lineEnd:w,polygonStart:function(){i.polygonStart(),m.lineStart=b},polygonEnd:function(){i.polygonEnd(),m.lineStart=_}};function P(D,M){D=e(D,M),i.point(D[0],D[1])}function _(){u=NaN,m.point=y,i.lineStart()}function y(D,M){var z=_t([D,M]),S=e(D,M);n(u,c,l,g,p,v,u=S[0],c=S[1],l=D,g=z[0],p=z[1],v=z[2],Sn,i),i.point(u,c)}function w(){m.point=P,i.lineEnd()}function b(){_(),m.point=x,m.lineEnd=R}function x(D,M){y(o=D,M),r=u,s=c,a=g,h=p,f=v,m.point=y}function R(){n(u,c,l,g,p,v,r,s,o,a,h,f,Sn,i),m.lineEnd=w,w()}return m}}var po=Ae({point:function(e,t){this.stream.point(e*E,t*E)}});function vo(e){return Ae({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function mo(e,t,n,i,o){function r(s,a){return s*=i,a*=o,[t+e*s,n-e*a]}return r.invert=function(s,a){return[(s-t)/e*i,(n-a)/e*o]},r}function xn(e,t,n,i,o,r){if(!r)return mo(e,t,n,i,o);var s=O(r),a=N(r),h=s*e,f=a*e,l=s/e,u=a/e,c=(a*n-s*t)/e,g=(a*t+s*n)/e;function p(v,m){return v*=i,m*=o,[h*v-f*m+t,n-f*v-h*m]}return p.invert=function(v,m){return[i*(l*v-u*m+c),o*(g-u*v-l*m)]},p}function yo(e){return _o(function(){return e})()}function _o(e){var t,n=150,i=480,o=250,r=0,s=0,a=0,h=0,f=0,l,u=0,c=1,g=1,p=null,v=dn,m=null,P,_,y,w=Ne,b=.5,x,R,D,M,z;function S(d){return D(d[0]*E,d[1]*E)}function Z(d){return d=D.invert(d[0],d[1]),d&&[d[0]*B,d[1]*B]}S.stream=function(d){return M&&z===d?M:M=po(vo(l)(v(x(w(z=d)))))},S.preclip=function(d){return arguments.length?(v=d,p=void 0,T()):v},S.postclip=function(d){return arguments.length?(w=d,m=P=_=y=null,T()):w},S.clipAngle=function(d){return arguments.length?(v=+d?Wi(p=d*E):(p=null,dn),T()):p*B},S.clipExtent=function(d){return arguments.length?(w=d==null?(m=P=_=y=null,Ne):Qi(m=+d[0][0],P=+d[0][1],_=+d[1][0],y=+d[1][1]),T()):m==null?null:[[m,P],[_,y]]},S.scale=function(d){return arguments.length?(n=+d,I()):n},S.translate=function(d){return arguments.length?(i=+d[0],o=+d[1],I()):[i,o]},S.center=function(d){return arguments.length?(r=d[0]%360*E,s=d[1]%360*E,I()):[r*B,s*B]},S.rotate=function(d){return arguments.length?(a=d[0]%360*E,h=d[1]%360*E,f=d.length>2?d[2]%360*E:0,I()):[a*B,h*B,f*B]},S.angle=function(d){return arguments.length?(u=d%360*E,I()):u*B},S.reflectX=function(d){return arguments.length?(c=d?-1:1,I()):c<0},S.reflectY=function(d){return arguments.length?(g=d?-1:1,I()):g<0},S.precision=function(d){return arguments.length?(x=bn(R,b=d*d),T()):dt(b)},S.fitExtent=function(d,C){return ni(S,d,C)},S.fitSize=function(d,C){return lo(S,d,C)},S.fitWidth=function(d,C){return uo(S,d,C)},S.fitHeight=function(d,C){return ho(S,d,C)};function I(){var d=xn(n,0,0,c,g,u).apply(null,t(r,s)),C=xn(n,i-d[0],o-d[1],c,g,u);return l=Bn(a,h,f),R=Le(t,C),D=Le(l,R),x=bn(R,b),T()}function T(){return M=z=null,S}return function(){return t=e.apply(this,arguments),S.invert=t.invert&&Z,I()}}function Je(e,t){return[e,wi(bi((U+t)/2))]}Je.invert=function(e,t){return[e,2*On(Pi(t))-U]};function Po(){return wo(Je).scale(961/H)}function wo(e){var t=yo(e),n=t.center,i=t.scale,o=t.translate,r=t.clipExtent,s=null,a,h,f;t.scale=function(u){return arguments.length?(i(u),l()):i()},t.translate=function(u){return arguments.length?(o(u),l()):o()},t.center=function(u){return arguments.length?(n(u),l()):n()},t.clipExtent=function(u){return arguments.length?(u==null?s=a=h=f=null:(s=+u[0][0],a=+u[0][1],h=+u[1][0],f=+u[1][1]),l()):s==null?null:[[s,a],[h,f]]};function l(){var u=L*i(),c=t(Ii(t.rotate()).invert([0,0]));return r(s==null?[[c[0]-u,c[1]-u],[c[0]+u,c[1]+u]]:e===Je?[[Math.max(c[0]-u,s),a],[Math.min(c[0]+u,h),f]]:[[s,Math.max(c[1]-u,a)],[h,Math.min(c[1]+u,f)]])}return l()}class So extends si{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,n=this.rule.bind(this);n("MapChart").setAll({projection:Po(),panX:"translateX",panY:"translateY",pinchZoom:!0,zoomStep:2,zoomLevel:1,rotationX:0,rotationY:0,rotationZ:0,maxZoomLevel:32,minZoomLevel:1,wheelY:"zoom",wheelX:"none",animationEasing:Qe(qe),wheelEasing:Qe(qe),wheelDuration:0,wheelSensitivity:1,maxPanOut:.4,centerMapOnZoomOut:!0});{const i=n("MapLine");i.setAll({precision:.5,role:"figure"}),pe(i,"stroke",t,"grid")}n("MapPolygonSeries").setAll({affectsBounds:!0}),n("MapPointSeries").setAll({affectsBounds:!1,clipFront:!1,clipBack:!0,autoScale:!1}),n("ClusteredPointSeries").setAll({minDistance:20,scatterDistance:3,scatterRadius:8,stopClusterZoom:.95}),n("MapLineSeries").setAll({affectsBounds:!1});{const i=n("MapPolygon");i.setAll({precision:.5,isMeasured:!1,role:"figure",fillOpacity:1,position:"absolute",strokeWidth:.2,strokeOpacity:1}),pe(i,"fill",t,"primaryButton"),pe(i,"stroke",t,"background")}n("Button",["zoomtools","home"]).setAll({visible:!1}),n("GraticuleSeries").setAll({step:10})}}function We(e){const t=Xi(e);return{longitude:t[0],latitude:t[1]}}function Wt(e){const t=Ri(e);if(t){const n={left:t[0][0],right:t[1][0],top:t[1][1],bottom:t[0][1]};return n.right<n.left&&(n.right=180,n.left=-180),n}return{left:0,right:0,top:0,bottom:0}}class Be extends Cn{constructor(){super(...arguments),Object.defineProperty(this,"_downTranslateX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downTranslateY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pLat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pLon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downZoomLevel",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_doubleDownDistance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dirtyGeometries",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_geometryColection",{enumerable:!0,configurable:!0,writable:!0,value:{type:"GeometryCollection",geometries:[]}}),Object.defineProperty(this,"_centerLocation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rxa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapBounds",{enumerable:!0,configurable:!0,writable:!0,value:[[0,0],[0,0]]}),Object.defineProperty(this,"_geoCentroid",{enumerable:!0,configurable:!0,writable:!0,value:{longitude:0,latitude:0}}),Object.defineProperty(this,"_geoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_prevGeoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_dispatchBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapFitted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_centerX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_centerY",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGeoPath(){const t=this.get("projection"),n=ao();n.projection(t),this.setPrivateRaw("geoPath",n)}geoPoint(){return this.invert(this.seriesContainer.toGlobal({x:this.width()/2,y:this.height()/2}))}geoCentroid(){return this._geoCentroid}geoBounds(){return this._geoBounds}_handleSetWheel(){const t=this.get("wheelX"),n=this.get("wheelY"),i=this.chartContainer;t!="none"||n!="none"?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=i.events.on("wheel",o=>{const r=this.get("wheelEasing"),s=this.get("wheelSensitivity",1),a=this.get("wheelDuration",0),h=o.originalEvent;let f=!1;if(ai(h,this))f=!0;else return;const l=i._display.toLocal(o.point);if(n=="zoom"){if(this.get("zoomLevel")==this.get("minZoomLevel",1)&&h.deltaY>0)return;this._handleWheelZoom(h.deltaY,l)}else n=="rotateY"?this._handleWheelRotateY(h.deltaY/5*s,a,r):n=="rotateX"&&this._handleWheelRotateX(h.deltaY/5*s,a,r);t=="zoom"?this._handleWheelZoom(h.deltaX,l):t=="rotateY"?this._handleWheelRotateY(h.deltaX/5*s,a,r):t=="rotateX"&&this._handleWheelRotateX(h.deltaX/5*s,a,r),f&&h.preventDefault()}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_prepareChildren(){super._prepareChildren();const t=this.get("projection"),n=this.innerWidth(),i=this.innerHeight(),o=this._geometryColection.geometries;if(this.isDirty("projection")){this._makeGeoPath(),this.markDirtyProjection(),this._fitMap(),t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),t.rotate&&t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]);let r=this._prevSettings.projection;if(r&&r!=t){let s=n/2,a=i/2;if(r.invert){let h=r.invert([s,a]);if(h){let f=t(h);if(f){let l=t.translate(),u=s-(f[0]-l[0]),c=a-(f[1]-l[1]);t.translate([u,c]),this.setRaw("translateX",u),this.setRaw("translateY",c)}}}}}if((this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this._dirtyGeometries&&(this._geometryColection.geometries=[],this.series.each(r=>{li(this._geometryColection.geometries,r._geometries)}),this._fitMap()),o.length!=0&&(n!=this._pw||i!=this._ph||this._dirtyGeometries)&&n>0&&i>0){let r=n/2,s=i/2;t.fitSize([n,i],this._geometryColection);const a=t.scale();if(this.setPrivateRaw("mapScale",a),t.scale(a*this.get("zoomLevel",1)),this._centerLocation){let f=t(this._centerLocation);if(f){let l=t.translate(),u=r-(f[0]-l[0]),c=s-(f[1]-l[1]);t.translate([u,c]),this.setRaw("translateX",u),this.setRaw("translateY",c),this._centerX=l[0],this._centerY=l[1]}}this.markDirtyProjection();const h=this.getPrivate("geoPath");this._mapBounds=h.bounds(this._geometryColection)}if(this._pw=n,this._ph=i,this.isDirty("zoomControl")){const r=this._prevSettings.zoomControl,s=this.get("zoomControl");s!==r&&(this._disposeProperty("zoomControl"),r&&r.dispose(),s&&(s.setPrivate("chart",this),this.children.push(s)),this.setRaw("zoomControl",s))}if(this.isDirty("zoomLevel")){t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),this.markDirtyProjection(),this.series.each(s=>{s.isType("MapPointSeries")&&s.get("autoScale")&&ut(s.dataItems,a=>{const h=a.bullets;h&&ut(h,f=>{const l=f.get("sprite");l&&l.set("scale",this.get("zoomLevel"))})})});const r=this.get("zoomControl");if(r){const s=this.get("zoomLevel",1);s==this.get("minZoomLevel",1)?this.root.events.once("frameended",()=>{r.minusButton.set("disabled",!0)}):r.minusButton.set("disabled",!1),s==this.get("maxZoomLevel",32)?r.plusButton.set("disabled",!0):r.plusButton.set("disabled",!1)}}(this.isDirty("translateX")||this.isDirty("translateY"))&&(t.translate([this.get("translateX",this.width()/2),this.get("translateY",this.height()/2)]),this.markDirtyProjection()),t.rotate&&(this.isDirty("rotationX")||this.isDirty("rotationY")||this.isDirty("rotationZ"))&&(t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]),this.markDirtyProjection()),(this.isDirty("pinchZoom")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_fitMap(){const t=this.get("projection");let n=this.innerWidth(),i=this.innerHeight();if(n>0&&i>0){t.fitSize([n,i],this._geometryColection),this.setPrivateRaw("mapScale",t.scale());const o=t.translate();this.setRaw("translateX",o[0]),this.setRaw("translateY",o[1]),this._centerX=o[0],this._centerY=o[1];const r=this.getPrivate("geoPath");this._mapBounds=r.bounds(this._geometryColection),this._geoCentroid=We(this._geometryColection);const s=Wt(this._geometryColection);if(this._geoBounds=s,this._geometryColection.geometries.length>0){s.left=Xt(this._geoBounds.left,3),s.right=Xt(this._geoBounds.right,3),s.top=Xt(this._geoBounds.top,3),s.bottom=Xt(this._geoBounds.bottom,3);const a=this._prevGeoBounds;a&&!ui(s,a)&&(this._dispatchBounds=!0,this._prevGeoBounds=s)}this._mapFitted=!0}}homeGeoPoint(){let t=this.get("homeGeoPoint");if(!t){const i=this.getPrivate("geoPath").bounds(this._geometryColection),o=i[0][0],r=i[0][1],s=i[1][0],a=i[1][1];t=this.invert({x:o+(s-o)/2,y:r+(a-r)/2})}return t}goHome(t){this.zoomToGeoPoint(this.homeGeoPoint(),this.get("homeZoomLevel",1),!0,t,this.get("homeRotationX"),this.get("homeRotationY"))}_updateChildren(){const t=this.get("projection");if(t.invert){let n=this.innerWidth(),i=this.innerHeight();n>0&&i>0&&(this._centerLocation=t.invert([this.innerWidth()/2,this.innerHeight()/2]))}super._updateChildren()}_afterChanged(){if(super._afterChanged(),this._dispatchBounds){this._dispatchBounds=!1;const t="geoboundschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}}_setUpTouch(){this.chartContainer._display.cancelTouch||(this.chartContainer._display.cancelTouch=!!(this.get("pinchZoom")||this.get("panX")||this.get("panY")))}markDirtyGeometries(){this._dirtyGeometries=!0,this.markDirty()}markDirtyProjection(){this.series.each(t=>{t.markDirtyProjection()})}_afterNew(){this._defaultThemes.push(So.new(this._root)),this._settings.themeTags=hi(this._settings.themeTags,["map"]),this.children.push(this.bulletsContainer),super._afterNew(),this._makeGeoPath(),this.chartContainer.children.push(this.seriesContainer),this.get("translateX")==null&&this.set("translateX",this.width()/2),this.get("translateY")==null&&this.set("translateY",this.height()/2),this.chartContainer.set("interactive",!0),this.chartContainer.set("interactiveChildren",!1),this.chartContainer.set("background",ci.new(this._root,{themeTags:["map","background"],fill:fi.fromHex(0),fillOpacity:0})),this._disposers.push(this.chartContainer.events.on("pointerdown",n=>{this._handleChartDown(n)})),this._disposers.push(this.chartContainer.events.on("globalpointerup",n=>{this._handleChartUp(n)})),this._disposers.push(this.chartContainer.events.on("globalpointermove",n=>{this._handleChartMove(n)}));let t=!1;for(let n=0;n<Ue.licenses.length;n++)Ue.licenses[n].match(/^AM5M.{5,}/i)&&(t=!0);t?this._root._licenseApplied():this._root._showBranding(),this._setUpTouch()}_handleChartDown(t){this._downZoomLevel=this.get("zoomLevel",1);const n=this.chartContainer._downPoints;let i=Ve(n).length;if(i==1){let o=n[1];o||(o=n[0]),o&&o.x==t.point.x&&o.y==t.point.y&&(i=0)}if(i>0){this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");const o=this.chartContainer._getDownPointId();if(o){let r=this._movePoints[o];r&&(this.chartContainer._downPoints[o]=r)}}else if(i==0){let o=this.chartContainer.get("background");if(o&&o.events.enableType("click"),this.get("panX")||this.get("panY")){this._za&&this._za.stop(),this._txa&&this._txa.stop(),this._tya&&this._tya.stop(),this._rxa&&this._rxa.stop(),this._rya&&this._rya.stop();const r=this.chartContainer._display.toLocal(t.point);this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");let s=this.get("projection");if(s.invert){let a=s.invert([r.x,r.y]),h=s.invert([r.x+1,r.y+1]);a&&h&&(this._pLon=Math.abs(h[0]-a[0]),this._pLat=Math.abs(h[1]-a[1]))}}}}invert(t){let n=this.get("projection");if(n.invert){const i=n.invert([t.x,t.y]);if(i)return{longitude:i[0],latitude:i[1]}}return{longitude:0,latitude:0}}convert(t,n,i){let o=this.get("projection"),r;if(o.rotate||(n=void 0,i=void 0),n!=null||i!=null){n==null&&(n=0),i==null&&(i=0);let s=o.rotate();o.rotate([n,i,0]),r=o([t.longitude,t.latitude]),o.rotate(s)}else r=o([t.longitude,t.latitude]);return r?{x:r[0],y:r[1]}:{x:0,y:0}}_handleChartUp(t){this.chartContainer._downPoints={}}_handlePinch(){const t=this.chartContainer;let n=0,i=[],o=[];if(gi(t._downPoints,(r,s)=>{i[n]=s;let a=this._movePoints[r];a&&(o[n]=a),n++}),i.length>1&&o.length>1){const r=t._display;let s=i[0],a=i[1],h=o[0],f=o[1];if(s&&a&&h&&f){s=r.toLocal(s),a=r.toLocal(a),h=r.toLocal(h),f=r.toLocal(f);let l=Math.hypot(a.x-s.x,a.y-s.y),c=Math.hypot(f.x-h.x,f.y-h.y)/l*this._downZoomLevel;c=Ke(c,this.get("minZoomLevel",1),this.get("maxZoomLevel",32));let g={x:h.x+(f.x-h.x)/2,y:h.y+(f.y-h.y)/2},p={x:s.x+(a.x-s.x)/2,y:s.y+(a.y-s.y)/2},v=this._downTranslateX||0,m=this._downTranslateY||0,P=this._downZoomLevel,_=g.x-(-v+p.x)/P*c,y=g.y-(-m+p.y)/P*c;this.set("zoomLevel",c),this.set("translateX",_),this.set("translateY",y)}}}_handleChartMove(t){const n=this.chartContainer;let i=n._getDownPoint();const o=n._getDownPointId(),s=t.originalEvent.pointerId;if(this.get("pinchZoom")&&s&&(this._movePoints[s]=t.point,Ve(n._downPoints).length>1)){this._handlePinch();return}if(!(o&&s&&s!=o)&&i){const a=this.get("panX"),h=this.get("panY");if(a!="none"||h!="none"){const f=n._display;let l=f.toLocal(t.point);i=f.toLocal(i);let u=this._downTranslateX,c=this._downTranslateY;if(Math.hypot(i.x-l.x,i.y-l.y)>5){let g=n.get("background");if(g&&g.events.disableType("click"),It(u)&&It(c)){let p=this.get("projection");const v=this.get("zoomLevel",1),m=this.get("maxPanOut",.4),P=this._mapBounds,_=this.width(),y=this.height(),w=P[1][0]-P[0][0],b=P[1][1]-P[0][1];if(a=="translateX"){u+=l.x-i.x;const x=_/2-(_/2-this._centerX)*v;u=Math.min(u,x+w*m*v),u=Math.max(u,x-w*m*v)}if(h=="translateY"){c+=l.y-i.y;const x=y/2-(y/2-this._centerY)*v;c=Math.min(c,x+b*m*v),c=Math.max(c,x-b*m*v)}if(this.set("translateX",u),this.set("translateY",c),p.invert){let x=p.invert([i.x,i.y]);location&&x&&(a=="rotateX"&&this.set("rotationX",this._downRotationX-(i.x-l.x)*this._pLon),h=="rotateY"&&this.set("rotationY",this._downRotationY+(i.y-l.y)*this._pLat))}}}}}}_handleWheelRotateY(t,n,i){this._rya=this.animate({key:"rotationY",to:this.get("rotationY",0)-t,duration:n,easing:i})}_handleWheelRotateX(t,n,i){this._rxa=this.animate({key:"rotationX",to:this.get("rotationX",0)-t,duration:n,easing:i})}_handleWheelZoom(t,n){let i=this.get("zoomStep",2),o=this.get("zoomLevel",1),r=o;t>0?r=o/i:t<0&&(r=o*i),r!=o&&this.zoomToPoint(n,r)}zoomToGeoBounds(t,n,i,o){t.right<t.left&&(t.right=180,t.left=-180);const s=this.getPrivate("geoPath").bounds(this._geometryColection);let a=this.convert({longitude:t.left,latitude:t.top},i,o),h=this.convert({longitude:t.right,latitude:t.bottom},i,o);a.y<s[0][1]&&(a.y=s[0][1]),h.y>s[1][1]&&(h.y=s[1][1]);let f=this.get("zoomLevel",1),l={left:a.x,right:h.x,top:a.y,bottom:h.y},u=this.seriesContainer,c=.9*Math.min(u.innerWidth()/(l.right-l.left)*f,u.innerHeight()/(l.bottom-l.top)*f),g=l.left+(l.right-l.left)/2,p=l.top+(l.bottom-l.top)/2,v=this.invert({x:g,y:p});return(i!=null||o!=null)&&this.rotate(i,o),this.zoomToGeoPoint(v,c,!0,n)}zoomToPoint(t,n,i,o){n&&(n=Ke(n,this.get("minZoomLevel",1),this.get("maxZoomLevel",32))),It(o)||(o=this.get("animationDuration",0));const r=this.get("animationEasing"),s=this.get("zoomLevel",1);this.get("centerMapOnZoomOut")&&n==this.get("homeZoomLevel",1)&&(t=this.convert(this.homeGeoPoint(),this.get("homeRotationX"),this.get("homeRotationY")),i=!0);let a=t.x,h=t.y,f=this.get("translateX",0),l=this.get("translateY",0),u=a,c=h;i&&(u=this.width()/2,c=this.height()/2);let g=u-(a-f)/s*n,p=c-(h-l)/s*n;return this._txa=this.animate({key:"translateX",to:g,duration:o,easing:r}),this._tya=this.animate({key:"translateY",to:p,duration:o,easing:r}),this._za=this.animate({key:"zoomLevel",to:n,duration:o,easing:r}),s!=n&&this._root.readerAlert(this._t("Zoom level changed to %1",this._root.locale,pi(n))),this._za}zoomToGeoPoint(t,n,i,o,r,s){let a=this.convert(t,r,s);if((r!=null||s!=null)&&this.rotate(r,s,o),a)return this.zoomToPoint(a,n,i,o)}rotate(t,n,i){if(this.get("projection").rotate){It(i)||(i=this.get("animationDuration",0));const r=this.get("animationEasing");t!=null&&this.animate({key:"rotationX",to:t,duration:i,easing:r}),n!=null&&this.animate({key:"rotationY",to:n,duration:i,easing:r})}}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)/this.get("zoomStep",2))}_clearDirty(){super._clearDirty(),this._dirtyGeometries=!1,this._mapFitted=!1}getArea(t){const n=this.getPrivate("geoPath"),i=t.get("geometry");return i?n.area(i):0}}Object.defineProperty(Be,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapChart"});Object.defineProperty(Be,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Cn.classNames.concat([Be.className])});var Ft={exports:{}};class bo{constructor(t=[],n=xo){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return this.length--,this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,o=n[t];for(;t>0;){const r=t-1>>1,s=n[r];if(i(o,s)>=0)break;n[t]=s,t=r}n[t]=o}_down(t){const{data:n,compare:i}=this,o=this.length>>1,r=n[t];for(;t<o;){let s=(t<<1)+1,a=n[s];const h=s+1;if(h<this.length&&i(n[h],a)<0&&(s=h,a=n[h]),i(a,r)>=0)break;n[t]=a,t=s}n[t]=r}}function xo(e,t){return e<t?-1:e>t?1:0}const Do=Object.freeze(Object.defineProperty({__proto__:null,default:bo},Symbol.toStringTag,{value:"Module"})),Eo=mi(Do);var Dn;function Co(){if(Dn)return Ft.exports;Dn=1;var e=Eo;e.default&&(e=e.default),Ft.exports=t,Ft.exports.default=t;function t(a,h,f){h=h||1;for(var l,u,c,g,p=0;p<a[0].length;p++){var v=a[0][p];(!p||v[0]<l)&&(l=v[0]),(!p||v[1]<u)&&(u=v[1]),(!p||v[0]>c)&&(c=v[0]),(!p||v[1]>g)&&(g=v[1])}var m=c-l,P=g-u,_=Math.min(m,P),y=_/2;if(_===0){var w=[l,u];return w.distance=0,w}for(var b=new e(void 0,n),x=l;x<c;x+=_)for(var R=u;R<g;R+=_)b.push(new i(x+y,R+y,y,a));var D=r(a),M=new i(l+m/2,u+P/2,0,a);M.d>D.d&&(D=M);for(var z=b.length;b.length;){var S=b.pop();S.d>D.d&&(D=S,f&&console.log("found best %d after %d probes",Math.round(1e4*S.d)/1e4,z)),!(S.max-D.d<=h)&&(y=S.h/2,b.push(new i(S.x-y,S.y-y,y,a)),b.push(new i(S.x+y,S.y-y,y,a)),b.push(new i(S.x-y,S.y+y,y,a)),b.push(new i(S.x+y,S.y+y,y,a)),z+=4)}f&&(console.log("num probes: "+z),console.log("best distance: "+D.d));var Z=[D.x,D.y];return Z.distance=D.d,Z}function n(a,h){return h.max-a.max}function i(a,h,f,l){this.x=a,this.y=h,this.h=f,this.d=o(a,h,l),this.max=this.d+this.h*Math.SQRT2}function o(a,h,f){for(var l=!1,u=1/0,c=0;c<f.length;c++)for(var g=f[c],p=0,v=g.length,m=v-1;p<v;m=p++){var P=g[p],_=g[m];P[1]>h!=_[1]>h&&a<(_[0]-P[0])*(h-P[1])/(_[1]-P[1])+P[0]&&(l=!l),u=Math.min(u,s(a,h,P,_))}return u===0?0:(l?1:-1)*Math.sqrt(u)}function r(a){for(var h=0,f=0,l=0,u=a[0],c=0,g=u.length,p=g-1;c<g;p=c++){var v=u[c],m=u[p],P=v[0]*m[1]-m[0]*v[1];f+=(v[0]+m[0])*P,l+=(v[1]+m[1])*P,h+=P*3}return h===0?new i(u[0][0],u[0][1],0,a):new i(f/h,l/h,0,a)}function s(a,h,f,l){var u=f[0],c=f[1],g=l[0]-u,p=l[1]-c;if(g!==0||p!==0){var v=((a-u)*g+(h-c)*p)/(g*g+p*p);v>1?(u=l[0],c=l[1]):v>0&&(u+=g*v,c+=p*v)}return g=a-u,p=h-c,g*g+p*p}return Ft.exports}var Mo=Co();const Lo=yi(Mo);class ge extends Mn{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.setPrivate("trustBounds",!0)}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const n=this.series;if(n){const i=n.projection();i&&i.precision(this.get("precision",.5));const o=n.geoPath();o&&(this._clear=!0,this.set("draw",r=>{o.context(this._display),o(t),o.context(null)}),this.isHover()&&this.showTooltip())}}}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}geoCentroid(){const t=this.get("geometry");return t?We(t):{latitude:0,longitude:0}}visualCentroid(){let t=0,n=[];const i=this.get("geometry");if(i){if(i.type=="Polygon")n=i.coordinates;else if(i.type=="MultiPolygon")for(let o=0;o<i.coordinates.length;o++){let r=i.coordinates[o],s=Mi({type:"Polygon",coordinates:r});s>t&&(n=r,t=s)}if(n){let o=Lo(n);return{longitude:o[0],latitude:o[1]}}}return{longitude:0,latitude:0}}_getTooltipPoint(){const t=this.series;if(t){const n=t.projection();if(n){const i=this.visualCentroid(),o=n([i.longitude,i.latitude]);if(o)return{x:o[0],y:o[1]}}}return{x:0,y:0}}}Object.defineProperty(ge,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygon"});Object.defineProperty(ge,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Mn.classNames.concat([ge.className])});class Ze extends zt{constructor(){super(...arguments),Object.defineProperty(this,"mapPolygons",{enumerable:!0,configurable:!0,writable:!0,value:this.addDisposer(new di(vi.new({}),()=>ge._new(this._root,{},[this.mapPolygons.template])))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Polygon","MultiPolygon"]})}makeMapPolygon(t){const n=this.children.push(this.mapPolygons.make());return n._setDataItem(t),this.mapPolygons.push(n),n}markDirtyProjection(){ut(this.dataItems,t=>{let n=t.get("mapPolygon");n&&n.markDirtyProjection()})}_prepareChildren(){super._prepareChildren(),this.isDirty("fill")&&this.mapPolygons.template.set("fill",this.get("fill")),this.isDirty("stroke")&&this.mapPolygons.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let n=t.get("mapPolygon");n||(n=this.makeMapPolygon(t)),t.set("mapPolygon",n);let i=t.get("geometry");if(i){if(this.get("reverseGeodata")&&i.coordinates)for(let r=0;r<i.coordinates.length;r++)if(i.type=="MultiPolygon")for(let s=0;s<i.coordinates[r].length;s++)i.coordinates[r][s].reverse();else i.coordinates[r].reverse();n.set("geometry",i)}n.series=this,this._addGeometry(t.get("geometry"),this)}disposeDataItem(t){super.disposeDataItem(t);const n=t.get("mapPolygon");n&&(this.mapPolygons.removeValue(n),n.dispose()),this._removeGeometry(t.get("geometry"))}_excludeDataItem(t){super._excludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const n=t.get("mapPolygon");n&&n.setPrivate("visible",!0)}markDirtyValues(t){if(super.markDirtyValues(),t){const n=t.get("mapPolygon");n&&n.set("geometry",t.get("geometry"))}}zoomToDataItem(t,n){const i=t.get("mapPolygon");if(i){const o=i.get("geometry"),r=this.chart;if(o&&r){if(n){const s=We(o);return r.rotate(-s.longitude,-s.latitude),r.zoomToGeoBounds(Wt(o),void 0,-s.longitude,-s.latitude)}return r.zoomToGeoBounds(Wt(o))}}}zoomToDataItems(t,n){let i,o,r,s;if(ut(t,a=>{const h=a.get("mapPolygon");if(h){const f=h.get("geometry");if(f){let l=Wt(f);i==null&&(i=l.left),o==null&&(o=l.right),r==null&&(r=l.top),s==null&&(s=l.bottom),i=Math.min(l.left,i),o=Math.max(l.right,o),r=Math.max(l.top,r),s=Math.min(l.bottom,s)}}}),i!=null&&o!=null&&r!=null&&s!=null){const a=this.chart;if(a){if(n){const h=i+(o-i)/2,f=s+(r-s)/2;return a.rotate(-h,-f),a.zoomToGeoBounds({left:i,right:o,top:r,bottom:s},void 0,-h,-f)}return a.zoomToGeoBounds({left:i,right:o,top:r,bottom:s})}}}getPolygonByPoint(t){let n;const o=this._display._renderer.getObjectAtPoint(t);if(o)return this.mapPolygons.each(function(r){r._display==o&&(n=r)}),n}getPolygonByGeoPoint(t){return this.getPolygonByPoint(this.chart.convert(t))}}Object.defineProperty(Ze,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygonSeries"});Object.defineProperty(Ze,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:zt.classNames.concat([Ze.className])});function Ro(e={}){const{baseUrl:t="geo",defaultQuality:n="Q0",cacheResults:i=!0}=e,o=de({Q0:null,Q1:null,Q2:null,Q3:null}),r=de(!1),s=de(null);async function a(h=n){if(i&&o.value[h])return o.value[h];r.value=!0,s.value=null;try{const f=await fetch(`${t}/_regionsYmapsLongLat${h}.json`);if(!f.ok)throw new Error(`Failed to fetch GeoJSON data: ${f.statusText}`);const l=await f.json();return i&&(o.value[h]=l),l}catch(f){return s.value=f instanceof Error?f:new Error("Unknown error occurred"),null}finally{r.value=!1}}return{geoData:o,loading:r,error:s,fetchGeoJson:a}}export{Be as M,Ze as a,zt as b,Po as g,Ro as u};
