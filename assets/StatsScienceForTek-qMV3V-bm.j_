import{Q as b}from"./QCardSection-CIRpBG4M.js";import{Q as q}from"./QCard-4hNWPW3w.js";import{Q as G,a as B}from"./QTabs-BG5OmQU2.js";import{Q as T}from"./QSeparator-BwTGVoGv.js";import{Q as F,a as V}from"./QTabPanels-39xrrEQU.js";import{Q as I}from"./QSpinnerDots-B_-BC47s.js";import{u as P}from"./useScienceForTek-DQNyZiNp.js";import{Q as S}from"./QBadge-ieUTSvzt.js";import{a6 as $,z as x,a7 as U,a8 as s,a9 as l,ab as t,ap as e,ae as d,ad as m,aq as a,ax as y,ar as g,ak as v,bE as h,H as C,Y as j}from"./index-Bhl6SETv.js";import{a as E}from"./utils-DcLltcr4.js";import"./use-dark-CCCGl-by.js";import"./uid-Bzmka5Fh.js";import"./rtl-ByL7cAmv.js";import"./use-tick-0DdASRGW.js";import"./touch-BjYP5sR0.js";import"./format-hlGAdIUH.js";const A={class:"text-subtitle1 text-bold"},H={class:"text-caption text-grey-8"},L={class:"text-caption text-grey-8 q-mb-sm"},M={class:"text-caption text-grey-8"},R={class:"text-caption text-grey-8"},Y={class:"text-caption text-grey-8"},D=$({__name:"ArticleCard",props:{item:{}},setup(p){const c=p,u=x(()=>{const n=E(c.item.date_start),r=E(c.item.date_end);return`${n} – ${r}`}),f=x(()=>c.item.short_name||c.item.executor);return(n,r)=>(s(),U(q,{bordered:"",flat:"",class:"full-height rea-border-grey rea-shadow"},{default:l(()=>[t(b,null,{default:l(()=>[e("div",A,d(n.item.name),1),e("div",H,"НИОКТР № "+d(n.item.number),1)]),_:1}),t(T,{inset:""}),t(b,null,{default:l(()=>[e("div",L,[r[0]||(r[0]=e("span",{class:"text-bold"},"Период:",-1)),m(" "+d(u.value),1)]),e("div",M,[r[1]||(r[1]=e("span",{class:"text-bold"},"Исполнитель:",-1)),m(" "+d(f.value),1)]),e("div",R,[r[2]||(r[2]=e("span",{class:"text-bold"},"Заказчик:",-1)),m(" "+d(n.item.customer),1)]),e("div",Y,[r[3]||(r[3]=e("span",{class:"text-bold"},"Отрасль:",-1)),m(" "+d(n.item.industry),1)])]),_:1})]),_:1}))}}),J={class:"text-h6 text-primary q-mb-md"},K={class:"row q-col-gutter-md"},O=$({__name:"IndustryGroupView",props:{data:{}},setup(p){const c=p,u=x(()=>h.groupBy(c.data,"industry"));return(f,n)=>(s(),a("div",null,[(s(!0),a(y,null,g(u.value,(r,i)=>(s(),a("div",{key:i,class:"q-mb-xl"},[e("div",J,[m(d(i)+" ",1),t(S,{align:"top",color:"info",outline:""},{default:l(()=>[m(d(r.length),1)]),_:2},1024)]),e("div",K,[(s(!0),a(y,null,g(v(h.sortBy)(r,"name"),_=>(s(),a("div",{key:_.number,class:"full-width"},[t(D,{item:_},null,8,["item"])]))),128))])]))),128))]))}}),W={class:"text-h6 text-primary q-mb-md"},X={class:"row q-col-gutter-md"},Z=$({__name:"ExecutorGroupView",props:{data:{}},setup(p){const c=p,u=x(()=>h.groupBy(c.data,"executor_ogrn")),f=n=>!n||!n.length?"Неизвестный исполнитель":n[0]?.short_name||n[0]?.executor||"Неизвестный исполнитель";return(n,r)=>(s(),a("div",null,[(s(!0),a(y,null,g(u.value,(i,_)=>(s(),a("div",{key:_,class:"q-mb-xl"},[e("div",W,[m(d(f(i))+" ",1),t(S,{align:"top",color:"info",outline:""},{default:l(()=>[m(d(i.length),1)]),_:2},1024)]),e("div",X,[(s(!0),a(y,null,g(v(h.sortBy)(i,"name"),k=>(s(),a("div",{key:k.number,class:"full-width"},[t(D,{item:k},null,8,["item"])]))),128))])]))),128))]))}}),tt={class:"text-h6 text-primary q-mb-md"},et={class:"row q-col-gutter-md"},st=$({__name:"CustomerGroupView",props:{data:{}},setup(p){const c=p,u=x(()=>h.groupBy(c.data,"customer"));return(f,n)=>(s(),a("div",null,[(s(!0),a(y,null,g(u.value,(r,i)=>(s(),a("div",{key:i,class:"q-mb-xl"},[e("div",tt,[m(d(i||"Неизвестный заказчик")+" ",1),t(S,{align:"top",color:"info",outline:""},{default:l(()=>[m(d(r.length),1)]),_:2},1024)]),e("div",et,[(s(!0),a(y,null,g(v(h.sortBy)(r,"name"),_=>(s(),a("div",{key:_.number,class:"full-width"},[t(D,{item:_},null,8,["item"])]))),128))])]))),128))]))}}),at={key:0},ot={class:"row items-center justify-center q-col-gutter-md q-mb-md"},rt={class:"col-xs-5 col-sm-3 col-md-2"},lt={class:"text-h5 text-primary"},nt={class:"col-xs-5 col-sm-3 col-md-2"},ut={class:"text-h5 text-primary"},dt={class:"col-xs-5 col-sm-3 col-md-2"},it={class:"text-h5 text-primary"},ct={class:"col-xs-5 col-sm-3 col-md-2"},mt={class:"text-h5 text-primary"},pt={key:1,class:"flex flex-center text-grey-6"},_t={key:1,class:"flex flex-center text-grey-6"},xt={key:2,class:"flex flex-center"},Et=$({__name:"StatsScienceForTek",props:{id:{default:()=>""}},setup(p){const c=p,u=C([]),{loading:f,error:n,fetchRegionData:r}=P(),i=C("industry"),_=x(()=>new Set(u.value.map(o=>o.executor_ogrn)).size),k=x(()=>new Set(u.value.map(o=>o.customer)).size),z=x(()=>new Set(u.value.map(o=>o.industry)).size),N=x(()=>u.value.length>0);return j(async()=>{u.value=await r(c.id)}),(w,o)=>(s(),a("div",null,[o[6]||(o[6]=e("div",{class:"text-h5 text-info q-mb-md"},"Научное сопровождение ТЭК",-1)),!v(f)&&!v(n)?(s(),a("div",at,[N.value?(s(),a(y,{key:0},[e("div",ot,[e("div",rt,[t(q,{flat:"",class:"rea-border-blue"},{default:l(()=>[t(b,{class:"text-center"},{default:l(()=>[o[2]||(o[2]=e("div",{class:"text-caption"},"разработок",-1)),e("div",lt,d(u.value.length),1)]),_:1})]),_:1})]),e("div",nt,[t(q,{flat:"",class:"rea-border-blue"},{default:l(()=>[t(b,{class:"text-center"},{default:l(()=>[o[3]||(o[3]=e("div",{class:"text-caption"},"исполнителей",-1)),e("div",ut,d(_.value),1)]),_:1})]),_:1})]),e("div",dt,[t(q,{flat:"",class:"rea-border-blue"},{default:l(()=>[t(b,{class:"text-center"},{default:l(()=>[o[4]||(o[4]=e("div",{class:"text-caption"},"заказчиков",-1)),e("div",it,d(k.value),1)]),_:1})]),_:1})]),e("div",ct,[t(q,{flat:"",class:"rea-border-blue"},{default:l(()=>[t(b,{class:"text-center"},{default:l(()=>[o[5]||(o[5]=e("div",{class:"text-caption"},"отраслей",-1)),e("div",mt,d(z.value),1)]),_:1})]),_:1})])]),t(G,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=Q=>i.value=Q),class:"text-primary q-mb-md",dense:"",align:"left"},{default:l(()=>[t(B,{name:"industry",label:"По отраслям"}),t(B,{name:"executor",label:"По исполнителям"}),t(B,{name:"customer",label:"По заказчикам"})]),_:1},8,["modelValue"]),t(T,{class:"q-mb-md"}),t(F,{modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=Q=>i.value=Q),animated:"",class:"bg-transparent"},{default:l(()=>[t(V,{name:"industry"},{default:l(()=>[t(O,{data:u.value},null,8,["data"])]),_:1}),t(V,{name:"executor"},{default:l(()=>[t(Z,{data:u.value},null,8,["data"])]),_:1}),t(V,{name:"customer"},{default:l(()=>[t(st,{data:u.value},null,8,["data"])]),_:1})]),_:1},8,["modelValue"])],64)):(s(),a("div",pt," Данные о научном сопровождении ТЭК региона не найдены "))])):v(n)?(s(),a("div",_t,d(v(n)),1)):(s(),a("div",xt,[t(I,{color:"primary",size:"xl"})]))]))}});export{Et as default};
